# TeamF Update: 24-01-06

- 자동배포 테스트 version2

# 💨 전체적인 구조

## app.js

- 미들웨어 설정 → 로깅, 보안, CORS 처리 등의 기능을 설정합니다.
- 라우트 연결 → 다양한 URL 경로에 대한 라우트 정의를 연결합니다.
- 애플리케이션 흐름 제어 → 전체 애플리케이션의 흐름을 제어하고 구성합니다.

## route (예: api.js, userInfo.js ...)

- 라우트 로직 → 특정 경로(URL)에 대한 요청을 처리합니다.
- 함수 실행 → 각 경로에 대한 특정 함수를 실행하여 요청을 처리합니다.
- 컨트롤러 역할 → HTTP 요청의 세부 사항을 다루고, 클라이언트와 서버 사이의 상호작용을 관리

## service (예: userService.js ...)

- 비즈니스 로직 → 데이터 처리, 복잡한 비즈니스 규칙 처리 등을 담당
- 모듈화 및 재사용 → 비즈니스 로직을 개별 모듈로 분리하여 재사용성과 유지보수성을 향상

# 💨 전체적인 흐름

## URL 요청 수신 (app.js)

- 클라이언트로부터 오는 URL 요청 수신 → 가장 먼저 요청을 받음
- 적절한 라우트로 요청 전달 → 요청된 URL에 따라 적절한 라우트로 요청을 전달
    - routes 디렉토리에 있는 라우트 파일(api.js, userInfo.js 등)을 사용

## 라우트 매칭 (api.js, userInfo.js 등)

- 특정 경로에 대한 요청 처리 → 각 라우트 파일은 해당 경로의 요청을 처리
- 응답 로직 정의 → 필요한 경우 서비스 로직을 불러와 실행
    - 예: 사용자 정보 검색, 업데이트 등은 서비스 계층에서 처리
- 라우트 계층에서 서비스 함수로부터 반환된 값을 받고 클라이언트에게 전송

## 응답 반환

- 서비스 계층 또는 라우트 계층에서 로직 처리 → 처리 결과는 라우트 핸들러로 반환
- 최종 응답 클라이언트에게 전송 → 클라이언트에게 결과를 반환

## commonResponse 미들웨어

- 응답 데이터의 표준화 → commonResponse 미들웨어는 응답 데이터를 일관된 형식으로 구성
- 응답 반환 → 처리된 응답을 클라이언트에게 JSON 형식으로 반환
- 일관된 응답 형식 제공 → 모든 라우트에 일관된 응답 형식을 제공하여 API의 일관성과 유지보수성 향상
    - 프론트가 너무 좋아해요

## 체인을 추가한다 ?

 * Express.js의 미들웨어 또는 라우트 핸들러를 순차적으로 연결하는 개념
 * Express.js에서 여러 미들웨어나 라우트 핸들러를 하나의 라우트에 연결할 수 있고,
 * 연결된 것들은 정의된 순서대로 실행되며 이러한 방식이 체이닝(Chaining)이다.
 *
 * 예제로 아래와 같이 있다고 가정한다면
 * router.get('/somepath', handler1, handler2, handler3);
 * handler1, handler2, handler3dms '/somepath' 경로에 대한 GET 요청을 처리하기 위해 체인으로 연결
 * 이렇게 되면 Express는 요청이 들어오면 handler1을 먼저 실행하고
 * handler1이 next()를 호출하면 handler2가 실행되며 순차적으로 실행되는 형식
 *
 * 체이닝 방식으로 코드의 모둘화와 재사용성을 높일 수 있고,
 * 복잡한 라우트 로직을 간단 명확하게 구성을 가능.
 * 특정 라우트에 대해 필요한 전처리나 후처리를 편리하게 그낭함.
 *
 * 결론:
 * commonResponse 미들웨어를 체인으로 추가하는 경우,
 * commonResponse는 라우트의 마지막 단계에서 실행되어 일관된 응답 형식으로 반환하게 